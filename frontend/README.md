# Frontend

Здесь подробнее описана работа frontend части приложения.

Сам сервер фронтенда по сути возвращает в ответ на запросы просто статические файлы, основная логика всё-таки описана в скриптах JS, так что по ним сейчас вкратце и пройдёмся.

## Скрипты

### cloning.js

Этот скрипт описывает логику "плюсиков" на странице создания резюме, то есть кнопок, отвечающих за создание однотипных блоков, например проектов, конатктов, навыков и т.д. 

Все кнопки на странице помечены атрибутом "data-button-add", а все блоки, которые будут клонироваться, атрибутом "data-for-button-add". В скрипте каждая кнопка соотносится со своим "подопечным" с помощью значений этих атрибутов.

### create_object.js

Скрипт create_object.js описывает функцию createObject, которая создаёт из введённой в поля страницы пользователем информации о себе объект JS, который уже затем с помощью других скриптов сериализуется в JSON. 

Скрипт работает благодаря атрибутам элементов страницы. Каждый элемент страницы, который должен быть в конечном объекте, помечается двумя атрибутами: "data-obj-type" и "data-obj-field". Первый атрибут показывает тип, а второй название поля внутри конечного JS объекта. Например, раздел "Навыки" имеет следующую сигнатуру: 
`<fieldset data-obj-field="skills" data-obj-type="array">`.
Это означает, что раздел "Навыки" в JS объекте будет иметь название "skills" и тип массива.

Скрипт проходит по детям каждого элемента, помеченного этими атрибутами и итеративно создаёт объект, хранящий в себе все введённые пользователем данные. Пустые поля пропускаются, для этого функция в скрипте возвращает не только сам объект, но и булевое значение, показывающее, является ли возвращённый объект пустым.

### saving_user_data.js

Этот скрипт отвечает за две вещи: сохранение данных пользователя и их загрузку из хранилища.

1. Сохранение.  
При нажатии на кнопку "Сохранить" вызывается функция createObject, которая возвращает JS объект, хранящий в себе данные о резюме пользователя. Затем этот объект сериализуется в JSON и записывается в локальное хранилище браузера по ключу "ResumeObject".

2. Загрузка.  
 При нажатии на кнопку "Загрузить", из локального хранилища браузера считывается JSON, который затем десериализуется в JS объект, хранящий данные пользователя. Этот объект затем передаётся в функцию parseObjectIntoElement, которая с помощью атрибутов HTML элементов "data-obj-type" и "data-obj-field" итеративно заполняет поля на странице данными из объекта. Стоит отметить, что функция parseObjectIntoElement перед заполнением полей массива проверяет, что данные из массива могут уместиться на странице, и если они не могут уместиться, то вызывается событие нажатия на "плюсик", что создаёт больше места для элементов массива.

 ### sending_classic.js

 Этот скрипт просто вызывает функцию createObject, получает из неё JS объект с данными пользователя, сериализует их в JSON, отправляет его на сервер, дожидается ответа и выводит его вниз страницы. Резюме, приходящее от сервера, приходит в формате pdf.